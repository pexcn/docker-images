#
# Caddyfile for gogs
#

# redirect http to https
http://git.local.pexcn.me {
  redir https://{host}{uri} permanent
}

# reverse proxy to gogs http endpoint
https://git.local.pexcn.me {
  encode zstd gzip
  tls /certs/local.pexcn.me_ecc/fullchain.cer /certs/local.pexcn.me_ecc/local.pexcn.me.key

  header Strict-Transport-Security max-age=31536000;
  reverse_proxy 127.0.0.1:3000
}



#
# Caddyfile for speedtest-go
#
http://nas.local.pexcn.me {
  reverse_proxy 127.0.0.1:8989
}

https://nas.local.pexcn.me {
  tls /certs/local.pexcn.me_ecc/fullchain.cer /certs/local.pexcn.me_ecc/local.pexcn.me.key
  reverse_proxy 127.0.0.1:8989
}
